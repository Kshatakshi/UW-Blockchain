{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"C:/Users/Lenovo/uw/UW-Blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\uw\\\\UW-Blockchain\\\\components\\\\RenderRow.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { Table, Button } from \"semantic-ui-react\";\nimport web3 from \"../ethereum/web3\";\nimport Organization from \"../ethereum/organization\";\nimport { Router } from \"../routes\";\n\nvar RenderRow = /*#__PURE__*/function (_React$Component) {\n  _inherits(RenderRow, _React$Component);\n\n  var _super = _createSuper(RenderRow);\n\n  function RenderRow() {\n    var _this;\n\n    _classCallCheck(this, RenderRow);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      approvalLoading: false,\n      finalizeLoading: false,\n      errMessage: \"\"\n    });\n\n    return _this;\n  }\n\n  _createClass(RenderRow, [{\n    key: \"onApprove\",\n    value: function () {\n      var _onApprove = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var organization, accounts;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                organization = Organization(this.props.address);\n                _context.prev = 1;\n                _context.next = 4;\n                return web3.eth.getAccounts();\n\n              case 4:\n                accounts = _context.sent;\n                this.setState({\n                  approvalLoading: true,\n                  errMessage: \"\"\n                });\n                _context.next = 8;\n                return organization.methods.approveRequest(this.props.id).send({\n                  from: accounts[0]\n                });\n\n              case 8:\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                this.setState({\n                  errMessage: _context.t0.message\n                });\n\n              case 13:\n                this.setState({\n                  approvalLoading: false\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      function onApprove() {\n        return _onApprove.apply(this, arguments);\n      }\n\n      return onApprove;\n    }()\n  }, {\n    key: \"onFinalize\",\n    value: function () {\n      var _onFinalize = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var organization, accounts;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                organization = Organization(this.props.address);\n                _context2.prev = 1;\n                this.setState({\n                  finalizeLoading: true,\n                  errMessage: false\n                });\n                _context2.next = 5;\n                return web3.eth.getAccounts();\n\n              case 5:\n                accounts = _context2.sent;\n                _context2.next = 8;\n                return organization.methods.finalizeRequest(this.props.id).send({\n                  from: accounts[0]\n                });\n\n              case 8:\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](1);\n                this.setState({\n                  errMessage: _context2.t0.message\n                });\n\n              case 13:\n                this.setState({\n                  finalizeLoading: false\n                });\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 10]]);\n      }));\n\n      function onFinalize() {\n        return _onFinalize.apply(this, arguments);\n      }\n\n      return onFinalize;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var readyToBeFinalized = this.props.request.approvalCount > this.props.approversCount / 2;\n      var Row = Table.Row,\n          Cell = Table.Cell;\n      return __jsx(Row, {\n        disabled: this.props.request.complete,\n        positive: readyToBeFinalized && !this.props.request.complete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      }, __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }\n      }, this.props.id), __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }, this.props.request.description), __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, this.props.request.recipent), __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }, web3.utils.fromWei(this.props.request.value, \"ether\")), __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, this.props.request.approvalCount, \"/\", this.props.approversCount), __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, this.props.request.complete ? null : __jsx(Button, {\n        loading: this.state.approvalLoading,\n        onClick: this.onApprove.bind(this),\n        color: \"green\",\n        basic: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      }, \"Approve\")), __jsx(Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }, this.props.request.complete ? null : __jsx(Button, {\n        loading: this.state.finalizeLoading,\n        onClick: this.onFinalize.bind(this),\n        color: \"teal\",\n        basic: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, \"Finalize\")));\n    }\n  }]);\n\n  return RenderRow;\n}(React.Component);\n\nexport default RenderRow;","map":{"version":3,"sources":["C:/Users/Lenovo/uw/UW-Blockchain/components/RenderRow.js"],"names":["React","Table","Button","web3","Organization","Router","RenderRow","approvalLoading","finalizeLoading","errMessage","organization","props","address","eth","getAccounts","accounts","setState","methods","approveRequest","id","send","from","message","finalizeRequest","readyToBeFinalized","request","approvalCount","approversCount","Row","Cell","complete","description","recipent","utils","fromWei","value","state","onApprove","bind","onFinalize","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Table, Button } from \"semantic-ui-react\";\r\nimport web3 from \"../ethereum/web3\";\r\nimport Organization from \"../ethereum/organization\";\r\nimport { Router } from \"../routes\";\r\n\r\nclass RenderRow extends React.Component {\r\n  state = {\r\n    approvalLoading: false,\r\n    finalizeLoading: false,\r\n    errMessage: \"\"\r\n  };\r\n  async onApprove() {\r\n    const organization = Organization(this.props.address);\r\n    try {\r\n      const accounts = await web3.eth.getAccounts();\r\n      this.setState({\r\n        approvalLoading: true,\r\n        errMessage: \"\"\r\n      });\r\n      await organization.methods.approveRequest(this.props.id).send({\r\n        from: accounts[0]\r\n      });\r\n    } catch (err) {\r\n      this.setState({\r\n        errMessage: err.message\r\n      });\r\n    }\r\n    this.setState({\r\n      approvalLoading: false\r\n    });\r\n  }\r\n\r\n  async onFinalize() {\r\n    const organization = Organization(this.props.address);\r\n    try {\r\n      this.setState({\r\n        finalizeLoading: true,\r\n        errMessage: false\r\n      });\r\n      const accounts = await web3.eth.getAccounts();\r\n      await organization.methods.finalizeRequest(this.props.id).send({\r\n        from: accounts[0]\r\n      });\r\n    } catch (err) {\r\n      this.setState({\r\n        errMessage: err.message\r\n      });\r\n    }\r\n    this.setState({\r\n      finalizeLoading: false\r\n    });\r\n  }\r\n  render() {\r\n    const readyToBeFinalized =\r\n      this.props.request.approvalCount > this.props.approversCount / 2;\r\n    const { Row, Cell } = Table;\r\n    return (\r\n      <Row\r\n        disabled={this.props.request.complete}\r\n        positive={readyToBeFinalized && !this.props.request.complete}\r\n      >\r\n        <Cell>{this.props.id}</Cell>\r\n        <Cell>{this.props.request.description}</Cell>\r\n        <Cell>{this.props.request.recipent}</Cell>\r\n        <Cell>{web3.utils.fromWei(this.props.request.value, \"ether\")}</Cell>\r\n        <Cell>\r\n          {this.props.request.approvalCount}/{this.props.approversCount}\r\n        </Cell>\r\n        <Cell>\r\n          {this.props.request.complete ? null : (\r\n            <Button\r\n              loading={this.state.approvalLoading}\r\n              onClick={this.onApprove.bind(this)}\r\n              color=\"green\"\r\n              basic\r\n            >\r\n              Approve\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n        <Cell>\r\n          {this.props.request.complete ? null : (\r\n            <Button\r\n              loading={this.state.finalizeLoading}\r\n              onClick={this.onFinalize.bind(this)}\r\n              color=\"teal\"\r\n              basic\r\n            >\r\n              Finalize\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RenderRow;\r\n"]},"metadata":{},"sourceType":"module"}