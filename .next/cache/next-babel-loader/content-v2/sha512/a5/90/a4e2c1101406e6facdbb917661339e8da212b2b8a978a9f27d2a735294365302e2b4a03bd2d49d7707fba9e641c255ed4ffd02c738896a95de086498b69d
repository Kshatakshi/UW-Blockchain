{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\uw\\\\UW-Blockchain\\\\components\\\\RenderRow.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport { Table, Button } from \"semantic-ui-react\";\nimport web3 from \"../ethereum/web3\";\nimport Organization from \"../ethereum/organization\";\nimport { Router } from \"../routes\";\n\nclass RenderRow extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      approvalLoading: false,\n      finalizeLoading: false,\n      errMessage: \"\"\n    });\n  }\n\n  async onApprove() {\n    const organization = Organization(this.props.address);\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        approvalLoading: true,\n        errMessage: \"\"\n      });\n      await organization.methods.approveRequest(this.props.id).send({\n        from: accounts[0]\n      });\n    } catch (err) {\n      this.setState({\n        errMessage: err.message\n      });\n    }\n\n    this.setState({\n      approvalLoading: false\n    });\n  }\n\n  async onFinalize() {\n    const organization = Organization(this.props.address);\n\n    try {\n      this.setState({\n        finalizeLoading: true,\n        errMessage: false\n      });\n      const accounts = await web3.eth.getAccounts();\n      await organization.methods.finalizeRequest(this.props.id).send({\n        from: accounts[0]\n      });\n    } catch (err) {\n      this.setState({\n        errMessage: err.message\n      });\n    }\n\n    this.setState({\n      finalizeLoading: false\n    });\n  }\n\n  render() {\n    const readyToBeFinalized = this.props.request.approvalCount > this.props.approversCount / 2;\n    const {\n      Row,\n      Cell\n    } = Table;\n    return __jsx(Row, {\n      disabled: this.props.request.complete,\n      positive: readyToBeFinalized && !this.props.request.complete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, this.props.id), __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, this.props.request.description), __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, this.props.request.recipent), __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, web3.utils.fromWei(this.props.request.value, \"ether\")), __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, this.props.request.approvalCount, \"/\", this.props.approversCount), __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, this.props.request.complete ? null : __jsx(Button, {\n      loading: this.state.approvalLoading,\n      onClick: this.onApprove.bind(this),\n      color: \"green\",\n      basic: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Approve\")), __jsx(Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }, this.props.request.complete ? null : __jsx(Button, {\n      loading: this.state.finalizeLoading,\n      onClick: this.onFinalize.bind(this),\n      color: \"teal\",\n      basic: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, \"Finalize\")));\n  }\n\n}\n\nexport default RenderRow;","map":{"version":3,"sources":["C:/Users/Lenovo/uw/UW-Blockchain/components/RenderRow.js"],"names":["React","Table","Button","web3","Organization","Router","RenderRow","Component","approvalLoading","finalizeLoading","errMessage","onApprove","organization","props","address","accounts","eth","getAccounts","setState","methods","approveRequest","id","send","from","err","message","onFinalize","finalizeRequest","render","readyToBeFinalized","request","approvalCount","approversCount","Row","Cell","complete","description","recipent","utils","fromWei","value","state","bind"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Table, Button } from \"semantic-ui-react\";\r\nimport web3 from \"../ethereum/web3\";\r\nimport Organization from \"../ethereum/organization\";\r\nimport { Router } from \"../routes\";\r\n\r\nclass RenderRow extends React.Component {\r\n  state = {\r\n    approvalLoading: false,\r\n    finalizeLoading: false,\r\n    errMessage: \"\"\r\n  };\r\n  async onApprove() {\r\n    const organization = Organization(this.props.address);\r\n    try {\r\n      const accounts = await web3.eth.getAccounts();\r\n      this.setState({\r\n        approvalLoading: true,\r\n        errMessage: \"\"\r\n      });\r\n      await organization.methods.approveRequest(this.props.id).send({\r\n        from: accounts[0]\r\n      });\r\n    } catch (err) {\r\n      this.setState({\r\n        errMessage: err.message\r\n      });\r\n    }\r\n    this.setState({\r\n      approvalLoading: false\r\n    });\r\n  }\r\n\r\n  async onFinalize() {\r\n    const organization = Organization(this.props.address);\r\n    try {\r\n      this.setState({\r\n        finalizeLoading: true,\r\n        errMessage: false\r\n      });\r\n      const accounts = await web3.eth.getAccounts();\r\n      await organization.methods.finalizeRequest(this.props.id).send({\r\n        from: accounts[0]\r\n      });\r\n    } catch (err) {\r\n      this.setState({\r\n        errMessage: err.message\r\n      });\r\n    }\r\n    this.setState({\r\n      finalizeLoading: false\r\n    });\r\n  }\r\n  render() {\r\n    const readyToBeFinalized =\r\n      this.props.request.approvalCount > this.props.approversCount / 2;\r\n    const { Row, Cell } = Table;\r\n    return (\r\n      <Row\r\n        disabled={this.props.request.complete}\r\n        positive={readyToBeFinalized && !this.props.request.complete}\r\n      >\r\n        <Cell>{this.props.id}</Cell>\r\n        <Cell>{this.props.request.description}</Cell>\r\n        <Cell>{this.props.request.recipent}</Cell>\r\n        <Cell>{web3.utils.fromWei(this.props.request.value, \"ether\")}</Cell>\r\n        <Cell>\r\n          {this.props.request.approvalCount}/{this.props.approversCount}\r\n        </Cell>\r\n        <Cell>\r\n          {this.props.request.complete ? null : (\r\n            <Button\r\n              loading={this.state.approvalLoading}\r\n              onClick={this.onApprove.bind(this)}\r\n              color=\"green\"\r\n              basic\r\n            >\r\n              Approve\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n        <Cell>\r\n          {this.props.request.complete ? null : (\r\n            <Button\r\n              loading={this.state.finalizeLoading}\r\n              onClick={this.onFinalize.bind(this)}\r\n              color=\"teal\"\r\n              basic\r\n            >\r\n              Finalize\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RenderRow;\r\n"]},"metadata":{},"sourceType":"module"}